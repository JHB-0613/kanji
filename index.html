<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>종합 한자 퀴즈 (불교, 속담, 이야기, 기초)</title>
    <style>
        /* 2. CSS 스타일 - 2주차quiz.html의 스타일을 기반으로 통합 */
        body {
            font-family: 'Malgun Gothic', sans-serif;
            background-color: #f4f4f4;
            color: #333;
            padding: 20px;
        }

        .quiz-container {
            max-width: 700px;
            margin: 0 auto;
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            text-align: center;
            color: #4CAF50;
            margin-bottom: 30px;
        }

        .quiz-card {
            border: 2px solid #ddd;
            padding: 20px;
            margin-bottom: 25px;
            border-radius: 8px;
            background-color: #fafafa;
        }

        .question-type {
            font-size: 1.1em;
            color: #555;
            margin-bottom: 15px;
            text-align: center;
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
        }
        
        /* 2주차 문제용 추가 정보 스타일 */
        .hanzi-info {
            font-size: 1.1em;
            color: #000080;
            text-align: center;
            margin-bottom: 10px;
            font-weight: bold;
        }

        /* 공통 한자 표시 스타일 */
        .chinese-chars {
            font-size: 3.0em; 
            text-align: center;
            line-height: 1.5;
            margin: 10px 0 20px;
            letter-spacing: 3px;
            font-weight: bold;
            word-break: keep-all; 
        }
        
        /* 뜻을 숨기기 위한 스타일 */
        .chinese-meaning-hidden {
            font-size: 1em;
            text-align: center;
            color: #4a4a4a;
            border-top: 1px dashed #ccc;
            padding-top: 15px;
            margin-top: 15px;
            display: none; /* 기본적으로 숨김 */
            line-height: 1.4;
        }

        .answer-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 20px;
        }

        .answer-input {
            padding: 10px;
            font-size: 1.2em;
            margin-bottom: 10px;
            border: 2px solid #ccc;
            border-radius: 5px;
            width: 80%;
            text-align: center;
        }

        .check-button {
            padding: 10px 20px;
            font-size: 1.1em;
            color: #fff;
            background-color: #4CAF50;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .check-button:hover {
            background-color: #45a049;
        }

        .result {
            margin-top: 15px;
            font-size: 1.1em;
            font-weight: bold;
            text-align: center;
        }

        .correct { color: #008000; }
        .incorrect { color: #ff0000; }
        .show-answer { 
            color: #0000ff; 
            margin-top: 5px; 
            font-size: 1em; 
            font-weight: normal; 
        }
    </style>
</head>
<body>

    <div class="quiz-container">
        <h1>종합 한자 퀴즈</h1>
        <div id="quiz-area">
            </div>
        <div style="text-align: center;">
            <button class="check-button" onclick="checkAllAnswers()">모든 정답 공개 및 확인</button>
            <p id="total-result" class="result"></p>
        </div>
    </div>

    <script>
        /* 3. JavaScript 코드 - 모든 퀴즈 데이터를 통합하여 사용 */
        
        // --- 1. 불교 한자어 퀴즈 데이터 (불교quiz.html) ---
        const buddhistQuiz = [
            { source: "불교", hanzi: "天上天下\n唯我獨尊", pinyin: "천상천하유아독존", meaning: "하늘 위아래에 오직 나, '참된 나'가 홀로 존귀하다"},
            { source: "불교", hanzi: "生老病死", pinyin: "생로병사", meaning: "인간이 반드시 겪는 삶의 고통"},
            { source: "불교", hanzi: "出家", pinyin: "출가", meaning: "집을 나가다, 속세의 모든 연을 끊고 승려가 되는 일"},
            { source: "불교", hanzi: "宗敎", pinyin: "종교", meaning: "최고의 가르침"},
            { source: "불교", hanzi: "方便", pinyin: "방편", meaning: "편한 방법"},
            { source: "불교", hanzi: "因緣", pinyin: "인연", meaning: "원인과 결과의 과정, 그로 인한 관계"},
            { source: "불교", hanzi: "業報", pinyin: "업보", meaning: "전생에 쌓은 업으로 현생에 얻는 보"},
            { source: "불교", hanzi: "輪廻", pinyin: "윤회", meaning: "수레바퀴가 끊임없이 도는 것처럼 생과 사의 세계가 돌고 도는 일"},
            { source: "불교", hanzi: "自業自得", pinyin: "자업자득", meaning: "자신이 행동한 일에 의한 결과를 자신이 얻음"},
            { source: "불교", hanzi: "因果應報", pinyin: "인과응보", meaning: "원인이 있으면 반드시 결과가 있다"},
            { source: "불교", hanzi: "極樂", pinyin: "극락", meaning: "더없이 안락하여 아무 걱정 없는 곳"},
            { source: "불교", hanzi: "極樂往生", pinyin: "극락왕생", meaning: "극락에 가서 태어나다"},
            { source: "불교", hanzi: "慈悲", pinyin: "자비", meaning: "사랑하고 불쌍히 여김, 깨닫지 못해 무지한 중생을 아끼고 불쌍히 여기며 돕는 마음"},
            { source: "불교", hanzi: "地獄", pinyin: "지옥", meaning: "땅의 감옥"},
            { source: "불교", hanzi: "冥福", pinyin: "명복", meaning: "죽은 뒤의 복"},
            { source: "불교", hanzi: "野壇法席", pinyin: "야단법석", meaning: "야외의 강단에서 베푸는 설법의 자리, 질서 없이 시끄럽고 경황 없는 상태를 비유적으로 이르는 말"},
            { source: "불교", hanzi: "慧眼", pinyin: "혜안", meaning: "슬기로운 눈, 사물을 옳게, 밝게 보는 슬기로운 눈"},
            { source: "불교", hanzi: "雪上加霜", pinyin: "설상가상", meaning: "내린 눈 위에 서리가 더해지듯, 좋지 않은 일이 연달아 일어나는 일"},
            { source: "불교", hanzi: "以心傳心", pinyin: "이심전심", meaning: "마음에서 마음으로 전한다, 말하지 않아도 서로의 의중을 이해하는 가까운 사이"},
            { source: "불교", hanzi: "不可思議", pinyin: "불가사의", meaning: "생각으로는 헤아릴 수도 없다, 사람으로서는 가늠할 수조차 없는 오묘한 이치"},
            { source: "불교", hanzi: "茶飯事", pinyin: "다반사", meaning: "차를 마시고 밥을 먹는 일, 보통 있는 일상의 일"},
            { source: "불교", hanzi: "無盡藏", pinyin: "무진장", meaning: "다함이 없는 많은 상태, 무언가가 엄청나게 많은 상태"},
            { source: "불교", hanzi: "玄關", pinyin: "현관", meaning: "깊고 오묘한 이치에 들어가는 문"},
            { source: "불교", hanzi: "講堂", pinyin: "강당", meaning: "경전을 외우는 방"},
            { source: "불교", hanzi: "食堂", pinyin: "식당", meaning: "먹는 방"},
            { source: "불교", hanzi: "大衆", pinyin: "대중", meaning: "여러 사람, 승려·신도 모두를 뜻하는 말"},
            { source: "불교", hanzi: "觀念", pinyin: "관념", meaning: "관찰사념, 사람의 마음 속에 떠오르는 의식"},
            { source: "불교", hanzi: "結界", pinyin: "결계", meaning: "제한한 경계, 수행 지역을 정하여 출입을 금지하는 것"},
            { source: "불교", hanzi: "點心", pinyin: "점심", meaning: "공복에 찍는 점, 식사 사이에 조금 먹는 음식"},
            { source: "불교", hanzi: "呵責", pinyin: "가책", meaning: "꾸짖고 책망함"},
            { source: "불교", hanzi: "無心", pinyin: "무심", meaning: "감정이 없음, 속세에 전혀 관심 없는 경지"}
        ];

        // --- 2. 속담 고사성어 퀴즈 데이터 (속담quiz.html) ---
        const idiomQuiz = [
            { source: "속담", hanzi: "烏飛梨落", pinyin: "오비이락", meaning: "까마귀 날자 배 떨어진다. 관계없는 두 일이 같이 일어나 오해를 받는 상황." },
            { source: "속담", hanzi: "鳥足之血", pinyin: "조족지혈", meaning: "새 발의 피. 아주 적은 분량, 아주 작아 신경 쓸 필요 없는 일." },
            { source: "속담", hanzi: "同價紅裳", pinyin: "동가홍상", meaning: "같은 값이면 다홍치마. 같은 값이면 더 좋은 물건을 갖는다." },
            { source: "속담", hanzi: "近墨者黑", pinyin: "근묵자흑", meaning: "먹을 가까이 하는 사람은 검어진다. 나쁜 사람을 가까이하면 나쁜 속성에 물들기 쉽다." },
            { source: "속담", hanzi: "良藥苦口", pinyin: "양약고구", meaning: "좋은 약은 입에 쓰다. 충언은 듣기 싫지만 나에게 이로운 말이다." },
            { source: "속담", hanzi: "吾鼻三尺", pinyin: "오비삼척", meaning: "내 코가 석자다. 내 일도 감당하기 어려워 남까지 생각해줄 수 없는 상황." },
            { source: "속담", hanzi: "種豆得豆", pinyin: "종두득두", meaning: "콩 심은 데 콩 난다. 어떤 일에는 원인이 있다 (원인에 따른 결과가 생긴다)." },
            { source: "속담", hanzi: "一魚濁水", pinyin: "일어탁수", meaning: "한 마리의 물고기가 물을 흐린다. 한 사람의 좋지 않은 행동이 전체에 나쁜 영향을 주는 상황." },
            { source: "속담", hanzi: "井底之蛙", pinyin: "정저지와", meaning: "우물 안의 개구리. 시야가 좁고 치우치면 전체를 보지 못한다." },
            { source: "속담", hanzi: "結者解之", pinyin: "결자해지", meaning: "묶은 사람이 그것을 풀어야 한다. 자신이 벌인 일은 자신이 해결해야 한다." },
            { source: "속담", hanzi: "來言不美\n去言何美", pinyin: "내언불미거언하미", meaning: "오는 말이 곱지 않으면 가는 말이 어떻게 곱겠는가? 남에게 먼저 말과 행동을 좋게 해야 남도 좋게 한다." },
            { source: "속담", hanzi: "鶏卵有骨", pinyin: "계란유골", meaning: "달걀에도 뼈가 있다. (아무리 좋은 기회라도 운이 나쁘면 이루지 못한다는 뜻)" },
            { source: "속담", hanzi: "鷄鳴狗盜", pinyin: "계명구도", meaning: "닭 울음소리와 개 도둑질. (잔재주나 하찮은 재능)." },
            { source: "속담", hanzi: "鶏肋", pinyin: "계륵", meaning: "닭의 갈비. (버리기는 아깝고 취하기에는 실속이 없는 물건이나 상황)." },
            { source: "속담", hanzi: "自業自得", pinyin: "자업자득", meaning: "자신이 행한 일의 결과를 자신이 받는다." },
            { source: "속담", hanzi: "因果應報", pinyin: "인과응보", meaning: "원인과 결과가 서로 응하여 갚음을 받는다." },
            { source: "속담", hanzi: "抑何心情", pinyin: "억하심정", meaning: "(억누르고 있는) 마음속 깊이 맺힌 마음." },
            { source: "속담", hanzi: "不知何歲月", pinyin: "부지하세월", meaning: "어느 세월이 걸릴지 알 수 없다." },
            { source: "속담", hanzi: "何厚何薄", pinyin: "하후하박", meaning: "누구에게 후하고 누구에게 박하다." },
            { source: "속담", hanzi: "何如間", pinyin: "하여간", meaning: "어찌하든 간에." }
        ];

        // --- 3. 이야기 고사성어 퀴즈 데이터 (이야기quiz.html) ---
        const storyQuiz = [
            { source: "이야기", hanzi: "指鹿爲馬", pinyin: "지록위마", meaning: "사슴을 가리켜 말이라 하다. 아랫사람이 윗사람을 농락하며 권세를 휘두르는 상황." },
            { source: "이야기", hanzi: "鷄鳴狗盜", pinyin: "계명구도", meaning: "닭 울음소리와 개 도둑질. 하찮은 재주라도 쓸모 있을 때가 있다는 뜻." },
            { source: "이야기", hanzi: "結草報恩", pinyin: "결초보은", meaning: "풀을 묶어 은혜를 갚다. 죽어 혼령이 되어서도 은혜를 잊지 않고 갚는다는 뜻." },
            { source: "이야기", hanzi: "背水陣", pinyin: "배수진", meaning: "강 또는 바다를 등지고 치는 진. 더 이상 물러설 데가 없는 상황." },
            { source: "이야기", hanzi: "多多益善", pinyin: "다다익선", meaning: "많으면 많을수록 더 좋다. 사람이나 사물이 많을수록 좋은 상황." },
            { source: "이야기", hanzi: "九牛一毛", pinyin: "구우일모", meaning: "아홉 마리 소에서 뽑은 하나의 털. 매우 많은 것 중 아주 적은 것, 대단히 하찮은 것." },
            { source: "이야기", hanzi: "白眉", pinyin: "백미", meaning: "흰 눈썹. 여러 명 중 가장 뛰어난 사람이나 훌륭한 물건." },
            { source: "이야기", hanzi: "泣斬馬謖", pinyin: "읍참마속", meaning: "울면서 마속을 베다. 대의를 위해 사심을 접어두고 결단을 내리는 상황." },
            { source: "이야기", hanzi: "三顧草廬", pinyin: "삼고초려", meaning: "초가집을 세 번 찾아가다. 인재를 영입하기 위해 참을성을 가지고 끝까지 노력함." },
            { source: "이야기", hanzi: "鶏肋", pinyin: "계륵", meaning: "닭의 갈비뼈. 큰 쓸모는 없지만 버리기는 아까운 사물 또는 난처한 상황." },
            { source: "이야기", hanzi: "出師表", pinyin: "출사표", meaning: "군대를 일으키며 임금께 올리는 글. 큰 결심을 하고 무언가를 이루기 위해 다짐할 때를 비유." },
            { source: "이야기", hanzi: "桃園結義", pinyin: "도원결의", meaning: "복숭아 동산에서 의형제를 맺다. 뜻이 맞는 사람끼리 하나의 목적을 위해 함께할 것을 약속함." },
            { source: "이야기", hanzi: "伯牙絶絃", pinyin: "백아절현", meaning: "백아가 거문고 현을 끊다. 속마음을 말하지 않아도 서로 알아주고 위하는 우정." },
            { source: "이야기", hanzi: "螢雪之功", pinyin: "형설지공", meaning: "반딧불과 눈의 공. 어려운 상황에서도 열심히 공부하는 모습." },
            { source: "이야기", hanzi: "鷄卵有骨", pinyin: "계란유골", meaning: "계란에도 뼈가 있다. 좋은 기회가 와도 뜻대로 되지 않는 운이 나쁜 상황." },
            { source: "이야기", hanzi: "千辛萬苦", pinyin: "천신만고", meaning: "천 가지로 맵고 만 가지로 쓰다. 온갖 어려움을 겪으며 고생하는 상황." },
            { source: "이야기", hanzi: "七顛八起", pinyin: "칠전팔기", meaning: "일곱 번 넘어져도 여덟 번 일어난다. 실패를 거듭해도 포기하지 않고 노력하는 상황." },
            { source: "이야기", hanzi: "刻舟求劍", pinyin: "각주구검", meaning: "배에 자국을 새겨 칼을 찾는다. 미련하여 어리석은 행동을 하는 상황." },
            { source: "이야기", hanzi: "助長", pinyin: "조장", meaning: "자라도록 돕는다. 조급하게 손을 쓰다가 오히려 일을 망치는 상황." },
            { source: "이야기", hanzi: "五十歩百歩", pinyin: "오십보백보", meaning: "오십보나 백보나 (똑같다). 정도의 차이는 있지만 본질적으로 같은 상황." },
            { source: "이야기", hanzi: "畫蛇添足", pinyin: "화사첨족", meaning: "뱀을 그리고 발을 덧붙이다 (사족). 쓸데없는 일을 덧붙이다가 오히려 망치는 상황." },
            { source: "이야기", hanzi: "漁夫之利", pinyin: "어부지리", meaning: "어부의 이익. 두 사람이 싸우는 사이에 엉뚱한 이가 이익을 가로채는 상황." },
            { source: "이야기", hanzi: "守株待兎", pinyin: "수주대토", meaning: "그루터기를 지키며 토끼를 기다리다. 말도 안 되는 고집을 부리는 상황, 때에 맞지 않는 행동 비판." },
            { source: "이야기", hanzi: "狐假虎威", pinyin: "호가호위", meaning: "여우가 호랑이의 위세를 빌리다. 남의 권세를 빌려서 위세를 부리는 상황." },
            { source: "이야기", hanzi: "朝三暮四", pinyin: "조삼모사", meaning: "아침에는 3개, 저녁에는 4개. 간사한 꾀로 남을 속이는 일, 같은 것을 두고 이득이라고 생각하는 상황." },
            { source: "이야기", hanzi: "塞翁之馬", pinyin: "새옹지마", meaning: "변방 늙은이의 말. 좋은 일이 나쁜 일이 되기도 하고, 나쁜 일이 좋은 일이 되기도 함." },
            { source: "이야기", hanzi: "愚公移山", pinyin: "우공이산", meaning: "우공이 산을 옮긴다. 어떤 일이든 우직하게 끊임없이 노력하면 반드시 이루어짐." }
        ];

        // --- 4. 한자 기초 퀴즈 데이터 (2주차quiz.html) ---
        // 2주차 퀴즈는 정답 형식이 음/뜻(예: 사람인)이므로, hanzi를 question으로, pinyin을 answer로 변경하여 통합.
        // meaning 필드는 explanation으로 사용하고, info 필드는 hanzi-info로 사용.
        const radicalQuiz = [
            { source: "기초", question: "人", info: "(변형: 亻)", answer: "사람인", explanation: "본래 부수 人(사람 인)입니다. 변형 형태는 亻입니다." },
            { source: "기초", question: "心", info: "(변형: 忄, 㣺)", answer: "마음심", explanation: "본래 부수 心(마음 심)입니다. 변형 형태는 忄, 㣺 등입니다." },
            { source: "기초", question: "手", info: "(변형: 扌)", answer: "손수", explanation: "본래 부수 手(손 수)입니다. 변형 형태는 扌입니다." },
            { source: "기초", question: "水", info: "(변형: 氵)", answer: "물수", explanation: "본래 부수 水(물 수)입니다. 변형 형태는 氵입니다." },
            { source: "기초", question: "犬", info: "(변형: 犭)", answer: "개견", explanation: "본래 부수 犬(개 견)입니다. 변형 형태는 犭입니다." },
            { source: "기초", question: "刀", info: "(변형: 刂)", answer: "칼도", explanation: "본래 부수 刀(칼 도)입니다. 변형 형태는 刂입니다." },
            { source: "기초", question: "攴", info: "(변형: 攵)", answer: "칠복", explanation: "본래 부수 攴(칠 복)입니다. 변형 형태는 攵입니다." },
            { source: "기초", question: "阜", info: "(변형: 阝 - 좌부변)", answer: "언덕부", explanation: "본래 부수 阜(언덕 부)입니다. 변형 형태는 阝(좌부 변)입니다." },
            { source: "기초", question: "邑", info: "(변형: 阝 - 우부방)", answer: "고을읍", explanation: "본래 부수 邑(고을 읍)입니다. 변형 형태는 阝(우부 방)입니다." },
            { source: "기초", question: "網", info: "(변형: 罒)", answer: "그물망", explanation: "본래 부수 網(그물 망)입니다. 변형 형태는 罒입니다." },
            { source: "기초", question: "火", info: "(변형: 灬)", answer: "불화", explanation: "본래 부수 火(불 화)입니다. 변형 형태는 灬입니다." },
            { source: "기초", question: "艸", info: "(변형: 艹)", answer: "풀초", explanation: "본래 부수 艸(풀 초)입니다. 변형 형태는 艹입니다." },
            { source: "기초", question: "肉", info: "(변형: 月 - 육달월)", answer: "고기육", explanation: "본래 부수 肉(고기 육)입니다. 변형 형태는 月(육달 월)입니다." },
            { source: "기초", question: "老", info: "(변형: 耂)", answer: "늙을로", explanation: "본래 부수 老(늙을 로)입니다. 변형 형태는 耂입니다." },
            { source: "기초", question: "示", info: "(변형: 礻)", answer: "보일시", explanation: "본래 부수 示(보일 시)입니다. 변형 형태는 礻입니다." },
            { source: "기초", question: "爪", info: "(변형: 爫)", answer: "손톱조", explanation: "본래 부수 爪(손톱 조)입니다. 변형 형태는 爫입니다." },
            { source: "기초", question: "衣", info: "(변형: 衤)", answer: "옷의", explanation: "본래 부수 衣(옷 의)입니다. 변형 형태는 衤입니다." },
            { source: "기초", question: "牛", info: "(변형: 없음)", answer: "소우", explanation: "본래 부수 牛(소 우)입니다. 변형 형태는 본래 모양 그대로 쓰입니다." },
            { source: "기초", question: "清", info: "(결합: 靑 + 水)", answer: "맑을청", explanation: "靑(음)과 水(뜻)가 결합한 형성자, '맑을 청'입니다." },
            { source: "기초", question: "請", info: "(결합: 靑 + 言)", answer: "청할청", explanation: "靑(음)과 言(뜻)이 결합한 형성자, '청할 청'입니다." },
            { source: "기초", question: "晴", info: "(결합: 靑 + 日)", answer: "갤청", explanation: "靑(음)과 日(뜻)이 결합한 형성자, '갤 청'입니다." },
            { source: "기초", question: "情", info: "(결합: 靑 + 心)", answer: "뜻정", explanation: "靑(음)과 心(뜻)이 결합한 형성자, '뜻 정'입니다." },
            { source: "기초", question: "靜", info: "(결합: 靑 + 爭)", answer: "고요할정", explanation: "靑(음)과 爭(뜻)이 결합한 형성자, '고요할 정'입니다." },
            { source: "기초", question: "首", info: "(활용: 自 위에 털/이마 표시)", answer: "머리수", explanation: "自(코) 위에 이마와 머리카락을 표시한 상형자, '머리 수'입니다." },
            { source: "기초", question: "頁", info: "(활용: 自 위/아래 턱 표시)", answer: "머리혈", explanation: "自(코) 위에 이마와 코 아래에 턱을 표시한 상형자, '머리 혈'입니다." },
            { source: "기초", question: "面", info: "(활용: 自 좌우에 뺨 표시)", answer: "얼굴면", explanation: "自(코) 위에 이마와 좌우에 뺨을 표시한 상형자, '얼굴 면'입니다." },
            { source: "기초", question: "鼻", info: "(활용: 自 + 콧구멍/액체 표시)", answer: "코비", explanation: "自(코) 아래에 콧구멍(田)과 흐르는 액체(콧물)를 표시한 상형자, '코 비'입니다." },
            { source: "기초", question: "須", info: "(활용: 自 아래에 털 표시)", answer: "수염수", explanation: "自(코) 아래에 털(수염)을 표시한 상형자, '수염 수'입니다." }
        ];
        
        // 데이터 통합 (2주차 데이터는 객체 구조가 다르므로 맞춰줌)
        const allQuizData = [
            ...buddhistQuiz.map(item => ({...item, isGosa: true, question: item.hanzi, answer: item.pinyin, explanation: `**음:** ${item.pinyin}<br>**뜻:** ${item.meaning}`})),
            ...idiomQuiz.map(item => ({...item, isGosa: true, question: item.hanzi, answer: item.pinyin, explanation: `**음:** ${item.pinyin}<br>**뜻:** ${item.meaning}`})),
            ...storyQuiz.map(item => ({...item, isGosa: true, question: item.hanzi, answer: item.pinyin, explanation: `**음:** ${item.pinyin}<br>**뜻:** ${item.meaning}`})),
            ...radicalQuiz.map(item => ({...item, isGosa: false, hanzi: item.question, pinyin: item.answer, meaning: item.explanation}))
        ];

        const quizArea = document.getElementById('quiz-area');

        // 배열 섞기 함수 (Fisher-Yates 알고리즘)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]]; // 요소 교환
            }
        }
        
        // 퀴즈 데이터 순서 랜덤화
        shuffleArray(allQuizData);

        // 퀴즈 카드 생성 함수
        function createQuizCard(data, index) {
            const card = document.createElement('div');
            card.className = 'quiz-card';
            
            // 문제 유형 구분
            let typeText = `[${data.source}]`;
            let questionDisplay = data.isGosa ? data.question : data.hanzi;
            let infoDisplay = data.isGosa ? "" : `<div class="hanzi-info">${data.info}</div>`;
            let answerPlaceholder = data.isGosa ? "한자어 음 입력" : "음과 뜻 (예: 사람인)";
            
            // 해설 내용 구성
            let explanationContent;
            if (data.isGosa) {
                // 고사성어/불교/속담 문제
                explanationContent = data.explanation; // 이미 음과 뜻이 모두 포함됨
            } else {
                // 기초 문제 (음/뜻이 정답)
                explanationContent = `정답: **${data.answer}**<br>해설: ${data.meaning}`;
            }

            card.innerHTML = `
                <div class="question-type">${typeText}</div>
                ${infoDisplay}
                <div class="chinese-chars">${questionDisplay.replace(/\n/g, '<br>')}</div>
                <div class="answer-area">
                    <input type="text" id="answer-${index}" class="answer-input" placeholder="${answerPlaceholder}">
                    <button class="check-button" onclick="checkAnswer(${index})">정답 확인</button>
                    <p id="result-${index}" class="result"></p>
                    <p id="show-answer-${index}" class="show-answer"></p>
                </div>
                <div id="explanation-${index}" class="chinese-meaning-hidden">
                    ${explanationContent}
                </div>
            `;
            quizArea.appendChild(card);
        }

        // 모든 퀴즈 카드 생성
        allQuizData.forEach(createQuizCard);


        // 정답 확인 함수
        function checkAnswer(index) {
            const inputElement = document.getElementById(`answer-${index}`);
            const resultElement = document.getElementById(`result-${index}`);
            const showAnswerElement = document.getElementById(`show-answer-${index}`);
            const explanationElement = document.getElementById(`explanation-${index}`);
            
            const currentData = allQuizData[index];

            explanationElement.style.display = 'block'; // 정답 확인 시 해설 공개

            // 띄어쓰기를 모두 제거하고 소문자로 변환하여 비교 
            const userAnswer = inputElement.value.trim().toLowerCase().replace(/\s/g, '');
            const correctAnswer = currentData.answer.toLowerCase().replace(/\s/g, '');

            // 고사성어/불교/속담 문제 (pinyin을 정답으로 사용)
            if (currentData.isGosa) {
                if (userAnswer === correctAnswer) {
                    resultElement.className = 'result correct';
                    resultElement.textContent = '✅ 정답입니다!';
                    showAnswerElement.textContent = `(음: ${currentData.answer})`;
                    inputElement.disabled = true; 
                } else {
                    resultElement.className = 'result incorrect';
                    resultElement.textContent = '❌ 틀렸습니다.';
                    showAnswerElement.textContent = `(정답: ${currentData.answer})`;
                }
            } 
            // 기초 문제 (음/뜻을 정답으로 사용)
            else { 
                if (userAnswer === correctAnswer) {
                    resultElement.className = 'result correct';
                    resultElement.textContent = '✅ 정답입니다! (띄어쓰기는 무시하고 비교합니다)';
                    inputElement.disabled = true; 
                } else {
                    resultElement.className = 'result incorrect';
                    resultElement.textContent = '❌ 틀렸습니다.';
                    showAnswerElement.textContent = `(정답: ${currentData.answer})`;
                }
            }
        }

        // 전체 정답 공개 및 확인 함수
        function checkAllAnswers() {
            let correctCount = 0;
            const totalResult = document.getElementById('total-result');
            
            for (let index = 0; index < allQuizData.length; index++) {
                const inputElement = document.getElementById(`answer-${index}`);
                const resultElement = document.getElementById(`result-${index}`);
                const showAnswerElement = document.getElementById(`show-answer-${index}`);
                const explanationElement = document.getElementById(`explanation-${index}`);

                const currentData = allQuizData[index];
                
                explanationElement.style.display = 'block'; 

                const userAnswer = inputElement.value.trim().toLowerCase().replace(/\s/g, '');
                const correctAnswer = currentData.answer.toLowerCase().replace(/\s/g, '');
                
                // 정답 로직은 개별 확인과 동일하게 적용
                if (userAnswer === correctAnswer) {
                    correctCount++;
                    resultElement.className = 'result correct';
                    resultElement.textContent = '✅ 정답입니다!';
                    showAnswerElement.textContent = currentData.isGosa ? `(음: ${currentData.answer})` : '';
                } else {
                    resultElement.className = 'result incorrect';
                    resultElement.textContent = '❌ 오답입니다.';
                    showAnswerElement.textContent = `(정답: ${currentData.answer})`;
                }
                inputElement.disabled = true; // 입력창 비활성화
            }

            totalResult.textContent = `총 ${allQuizData.length}문제 중 ${correctCount}문제 정답입니다.`;
        }
    </script>

</body>
</html>